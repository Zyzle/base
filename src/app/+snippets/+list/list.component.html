<md-toolbar color="accent">
  Useful Code Snippets
  <span class="spacer"></span>
  <a md-fab color="primary" [routerLink]="['add']" class="add-fab">
    <md-icon>add</md-icon>
  </a>
</md-toolbar>
<md-card>
  <md-card-header>
    <md-card-title>
      <md-input [(ngModel)]="search" [disabled]="!loaded"
        placeholder="Search" dividerColor="accent" ></md-input>
    </md-card-title>
  </md-card-header>

  <div *ngIf="!loaded" class="centre-er">
    <md-progress-circle mode="indeterminate" color="accent"></md-progress-circle>
  </div>
  <div *ngIf="loaded">
    <md-nav-list>
      <span *ngFor="let backup of snippetsBackup | async" class="snippet-item">
        <md-list-item>
          <img md-list-icon [src]="getImage(backup)" />
          <span md-line class="title to-delete">{{backup.name}}</span>
          <button md-icon-button (click)="restore(backup)"><md-icon>undo</md-icon></button>
        </md-list-item>
      </span>

      <span *ngFor="let snippet of snippets | snippetFilter: search" class="snippet-item">
        <md-list-item>
            <img md-list-icon [src]="getImage(snippet)" />
            <!--
              I dont particularly like this but it seems to be the only way to
              have everything align properly
            -->
            <a [routerLink]="[snippet.$key]" md-line class="title">{{snippet.name}}</a>
            <a [routerLink]="[snippet.$key]" md-line class="secondary">{{snippet.description}}</a>
            <a [routerLink]="[snippet.$key]" md-line class="secondary detail">Created By: {{snippet.authorName}} | {{ snippet.updatedDate | date}}</a>
          <button md-icon-button (click)="delete(snippet)">
            <md-icon>delete</md-icon>
          </button>
        </md-list-item>
      </span>
    </md-nav-list>
  </div>
</md-card>
